<table class="table">
  <thead>
    <tr>
      <th class="span2">Datum</th>
      <th class="span2">1</th>
      <th class="span2">2</th>
      <th class="span2">3</th>
      <th class="span2">4</th>
    </tr>
  </thead>
  <tbody>
    <% life_guarding_timespan.dates.each do |date| %>
      <tr <% if date.cwday-1 == Date::DAYS_INTO_WEEK[:sunday]%> class="info" <%elsif date.cwday-1 == Date::DAYS_INTO_WEEK[:saturday]%> class="error" <%end%>>
        <td><strong><%= l date, :format => :with_day %></strong></td>
        <% people = life_guarding_timespan.people_at(date) %>
        <% (1..4).each do |position| %>
          <% if people[position].blank? %>
            <%= content_tag :td, :class => "life_guard", :id => "life_guard-#{date.to_s}-#{position}" do %>
              <%= link_to "Přihlásit",
                subscribe_life_guarding_timespan_life_guards_path(life_guarding_timespan,
                                                                  :date => date,
                                                                  :position => position),
                :method => :put,
                :confirm=> "Opravdu se chcete přihlásit na #{l date}? Odhlásit Vás může jen předseda.",
                :remote => true %>
            <% end %>
        <% else %>
          <td>
            <%= render "life_guards/entry", :life_guard => people[position], :life_guarding_timespan => life_guarding_timespan %>
          </td>
        <% end %>

      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>
